<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.11.0"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>BMSNode: ADC</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">BMSNode
							</div>
							<div id="projectbrief">BMS Node Cell Monitoring Firmware</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__adc.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ADC</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gada9f09bbee2e15c2069f4c25ec74bed8" id="r_gada9f09bbee2e15c2069f4c25ec74bed8"><td class="memItemLeft" align="right" valign="top"><a id="gada9f09bbee2e15c2069f4c25ec74bed8" name="gada9f09bbee2e15c2069f4c25ec74bed8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_NUM_CHANNELS</b></td></tr>
<tr class="memdesc:gada9f09bbee2e15c2069f4c25ec74bed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of ADC channels that are sampled by <a class="el" href="#gacff17a7d94066b5fe8bccba26d9ab207">adc_sample()</a>, and that can be returned by <a class="el" href="#ga011931ae01892897bd9c6a20a4ba83b1" title="Return the raw ADC data in an array.">adc_get_raw()</a>. <br /></td></tr>
<tr class="separator:gada9f09bbee2e15c2069f4c25ec74bed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga3f359f6c13ede9800bb3ff0de2dc3213" id="r_ga3f359f6c13ede9800bb3ff0de2dc3213"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3f359f6c13ede9800bb3ff0de2dc3213">adc_channel</a> { <a class="el" href="#gga3f359f6c13ede9800bb3ff0de2dc3213a07517379307a6f2010079bf5e873f0ad">ADC_CH_CELLV</a>
, <a class="el" href="#gga3f359f6c13ede9800bb3ff0de2dc3213ae4761d7b3c0d9f577c82f76d378ef80f">ADC_CH_BOARD_TEMP</a>
, <a class="el" href="#gga3f359f6c13ede9800bb3ff0de2dc3213ae3616888ea2ff8cb70916975c2f58acf">ADC_CH_EXT_TEMP</a>
, <a class="el" href="#gga3f359f6c13ede9800bb3ff0de2dc3213a82c89a7ba271dfc90eefee24f76ef696">ADC_CH_MCU_TEMP</a>
 }</td></tr>
<tr class="memdesc:ga3f359f6c13ede9800bb3ff0de2dc3213"><td class="mdescLeft">&#160;</td><td class="mdescRight">ADC channel index.  <a href="#ga3f359f6c13ede9800bb3ff0de2dc3213">More...</a><br /></td></tr>
<tr class="separator:ga3f359f6c13ede9800bb3ff0de2dc3213"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga65363667c227eef3e471e319eabb99c3" id="r_ga65363667c227eef3e471e319eabb99c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga65363667c227eef3e471e319eabb99c3">adc_powerup</a> (void)</td></tr>
<tr class="memdesc:ga65363667c227eef3e471e319eabb99c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize and power up the ADC circuitry.  <br /></td></tr>
<tr class="separator:ga65363667c227eef3e471e319eabb99c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga769bcce36248aaaf9e5a10f00756c02e" id="r_ga769bcce36248aaaf9e5a10f00756c02e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga769bcce36248aaaf9e5a10f00756c02e">adc_powerdown</a> (void)</td></tr>
<tr class="memdesc:ga769bcce36248aaaf9e5a10f00756c02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Power down the ADC circuitry.  <br /></td></tr>
<tr class="separator:ga769bcce36248aaaf9e5a10f00756c02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2d49f509f93732853bbbe40d8f644d4" id="r_gae2d49f509f93732853bbbe40d8f644d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae2d49f509f93732853bbbe40d8f644d4">adc_run</a> (void)</td></tr>
<tr class="memdesc:gae2d49f509f93732853bbbe40d8f644d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run ADC process to collect periodic samples.  <br /></td></tr>
<tr class="separator:gae2d49f509f93732853bbbe40d8f644d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacff17a7d94066b5fe8bccba26d9ab207" id="r_gacff17a7d94066b5fe8bccba26d9ab207"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacff17a7d94066b5fe8bccba26d9ab207">adc_sample</a> (ADC_t *padc, uint8_t muxpos, uint8_t refsel)</td></tr>
<tr class="separator:gacff17a7d94066b5fe8bccba26d9ab207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8aac6822c2d63f51bb9f284264398100" id="r_ga8aac6822c2d63f51bb9f284264398100"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8aac6822c2d63f51bb9f284264398100">adc_collect</a> (void)</td></tr>
<tr class="separator:ga8aac6822c2d63f51bb9f284264398100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab590c1dd6b06009368ecca6efb23dd0" id="r_gaab590c1dd6b06009368ecca6efb23dd0"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaab590c1dd6b06009368ecca6efb23dd0">adc_get_cellmv</a> (void)</td></tr>
<tr class="memdesc:gaab590c1dd6b06009368ecca6efb23dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the cell voltage in millivolts.  <br /></td></tr>
<tr class="separator:gaab590c1dd6b06009368ecca6efb23dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82fc4ab21cb10f122ae9e44bc2a50d11" id="r_ga82fc4ab21cb10f122ae9e44bc2a50d11"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga82fc4ab21cb10f122ae9e44bc2a50d11">adc_get_tempC</a> (enum <a class="el" href="#ga3f359f6c13ede9800bb3ff0de2dc3213">adc_channel</a> ch)</td></tr>
<tr class="memdesc:ga82fc4ab21cb10f122ae9e44bc2a50d11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the onboard temperature in C.  <br /></td></tr>
<tr class="separator:ga82fc4ab21cb10f122ae9e44bc2a50d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga011931ae01892897bd9c6a20a4ba83b1" id="r_ga011931ae01892897bd9c6a20a4ba83b1"><td class="memItemLeft" align="right" valign="top">uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga011931ae01892897bd9c6a20a4ba83b1">adc_get_raw</a> (void)</td></tr>
<tr class="memdesc:ga011931ae01892897bd9c6a20a4ba83b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the raw ADC data in an array.  <br /></td></tr>
<tr class="separator:ga011931ae01892897bd9c6a20a4ba83b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga3f359f6c13ede9800bb3ff0de2dc3213" name="ga3f359f6c13ede9800bb3ff0de2dc3213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f359f6c13ede9800bb3ff0de2dc3213">&#9670;&#160;</a></span>adc_channel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga3f359f6c13ede9800bb3ff0de2dc3213">adc_channel</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ADC channel index. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga3f359f6c13ede9800bb3ff0de2dc3213a07517379307a6f2010079bf5e873f0ad" name="gga3f359f6c13ede9800bb3ff0de2dc3213a07517379307a6f2010079bf5e873f0ad"></a>ADC_CH_CELLV&#160;</td><td class="fielddoc"><p>cell voltage </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3f359f6c13ede9800bb3ff0de2dc3213ae4761d7b3c0d9f577c82f76d378ef80f" name="gga3f359f6c13ede9800bb3ff0de2dc3213ae4761d7b3c0d9f577c82f76d378ef80f"></a>ADC_CH_BOARD_TEMP&#160;</td><td class="fielddoc"><p>board temperature </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3f359f6c13ede9800bb3ff0de2dc3213ae3616888ea2ff8cb70916975c2f58acf" name="gga3f359f6c13ede9800bb3ff0de2dc3213ae3616888ea2ff8cb70916975c2f58acf"></a>ADC_CH_EXT_TEMP&#160;</td><td class="fielddoc"><p>external temperature </p>
</td></tr>
<tr><td class="fieldname"><a id="gga3f359f6c13ede9800bb3ff0de2dc3213a82c89a7ba271dfc90eefee24f76ef696" name="gga3f359f6c13ede9800bb3ff0de2dc3213a82c89a7ba271dfc90eefee24f76ef696"></a>ADC_CH_MCU_TEMP&#160;</td><td class="fielddoc"><p>internal MCU temperature </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga65363667c227eef3e471e319eabb99c3" name="ga65363667c227eef3e471e319eabb99c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65363667c227eef3e471e319eabb99c3">&#9670;&#160;</a></span>adc_powerup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void adc_powerup </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize and power up the ADC circuitry. </p>
<p>This should be called prior to <a class="el" href="#gae2d49f509f93732853bbbe40d8f644d4" title="Run ADC process to collect periodic samples.">adc_run()</a>. It takes about 2-3 ms for the external reference to settle. ADC can be left powered up for as long as samples are needed, but it does cause the board power consumption to increase by about 1-1.5 mA. <a class="el" href="#gae2d49f509f93732853bbbe40d8f644d4" title="Run ADC process to collect periodic samples.">adc_run()</a> will automatically wait the necessary time before taking the first sample. However, if <a class="el" href="#gacff17a7d94066b5fe8bccba26d9ab207">adc_sample()</a> is used directly, then there should be about 3 ms delay after this function and before <a class="el" href="#gacff17a7d94066b5fe8bccba26d9ab207">adc_sample()</a>. </p>

</div>
</div>
<a id="ga769bcce36248aaaf9e5a10f00756c02e" name="ga769bcce36248aaaf9e5a10f00756c02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga769bcce36248aaaf9e5a10f00756c02e">&#9670;&#160;</a></span>adc_powerdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void adc_powerdown </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Power down the ADC circuitry. </p>
<p>Reverses <a class="el" href="#ga65363667c227eef3e471e319eabb99c3" title="Initialize and power up the ADC circuitry.">adc_powerup()</a> and turns off ADC related circuits. </p>

</div>
</div>
<a id="gae2d49f509f93732853bbbe40d8f644d4" name="gae2d49f509f93732853bbbe40d8f644d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2d49f509f93732853bbbe40d8f644d4">&#9670;&#160;</a></span>adc_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void adc_run </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run ADC process to collect periodic samples. </p>
<p>Before using this function, <a class="el" href="#ga65363667c227eef3e471e319eabb99c3" title="Initialize and power up the ADC circuitry.">adc_powerup()</a> should be called at least once, and at least 3 ms before or the resulting ADC sample data will not be valid. If ADC is powered down with <a class="el" href="#ga769bcce36248aaaf9e5a10f00756c02e" title="Power down the ADC circuitry.">adc_powerdown()</a>, the <a class="el" href="#ga65363667c227eef3e471e319eabb99c3" title="Initialize and power up the ADC circuitry.">adc_powerup()</a> must be used again before calling this function. It is not necessary to repeatedly call <a class="el" href="#ga65363667c227eef3e471e319eabb99c3" title="Initialize and power up the ADC circuitry.">adc_powerup()</a> if the ADC is left powered.</p>
<p>This function should be called from the main loop. It will take samples at a regular interval. It blocks for about 1 ms when a sample is to be taken. When the sample interval has not yet elapsed, it does not block.</p>
<p>ADC sample data is stored in an internal cache and can be retreived using other <code>adc_get_NNN()</code> functions. </p>

</div>
</div>
<a id="gacff17a7d94066b5fe8bccba26d9ab207" name="gacff17a7d94066b5fe8bccba26d9ab207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacff17a7d94066b5fe8bccba26d9ab207">&#9670;&#160;</a></span>adc_sample()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t adc_sample </td>
          <td>(</td>
          <td class="paramtype">ADC_t *</td>          <td class="paramname"><span class="paramname"><em>padc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>muxpos</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>refsel</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Take a single ADC sample with specific parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">padc</td><td>pointer to ADC peripheral to use </td></tr>
    <tr><td class="paramname">muxpos</td><td>the ADC mux value to select the desired channel </td></tr>
    <tr><td class="paramname">refsel</td><td>the group configuration value for ADC reference selection</td></tr>
  </table>
  </dd>
</dl>
<p>This function will configure the specified ADC peripheral with the channel mux value and the selected reference. Refer to the data sheet for the valid choices for <em>muxpos</em>. The value of <em>refsel</em> is expected to be one of the following: <code>ADC_REFSEL_VDDREF_gc</code>, or <code>ADC_REFSEL_INTREF_gc</code>. This function will block until the ADC conversion is complete. It takes about 80 uS.</p>
<dl class="section note"><dt>Note</dt><dd>This is an internal function and should not be called directly. It is called by <a class="el" href="#gae2d49f509f93732853bbbe40d8f644d4" title="Run ADC process to collect periodic samples.">adc_run()</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the ADC sample value </dd></dl>

</div>
</div>
<a id="ga8aac6822c2d63f51bb9f284264398100" name="ga8aac6822c2d63f51bb9f284264398100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8aac6822c2d63f51bb9f284264398100">&#9670;&#160;</a></span>adc_collect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void adc_collect </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sample all the ADC channels and store the result.</p>
<p>Before using this function, <a class="el" href="#ga65363667c227eef3e471e319eabb99c3" title="Initialize and power up the ADC circuitry.">adc_powerup()</a> should be called at least once, and at least 3 ms before or the resulting ADC sample data will not be valid. If ADC is powered down with <a class="el" href="#ga769bcce36248aaaf9e5a10f00756c02e" title="Power down the ADC circuitry.">adc_powerdown()</a>, the <a class="el" href="#ga65363667c227eef3e471e319eabb99c3" title="Initialize and power up the ADC circuitry.">adc_powerup()</a> must be used again before calling this function. It is not necessary to repeatedly call <a class="el" href="#ga65363667c227eef3e471e319eabb99c3" title="Initialize and power up the ADC circuitry.">adc_powerup()</a> if the ADC is left powered.</p>
<p>ADC sample data is stored in an internal cache and can be retreived using other <code>adc_get_NNN()</code> functions.</p>
<p>This function is blocking until all the ADC data is collected. It takes about 400 uS.</p>
<dl class="section note"><dt>Note</dt><dd>This is an internal function and should not be called directly. It is called by <a class="el" href="#gae2d49f509f93732853bbbe40d8f644d4" title="Run ADC process to collect periodic samples.">adc_run()</a>. </dd></dl>

</div>
</div>
<a id="gaab590c1dd6b06009368ecca6efb23dd0" name="gaab590c1dd6b06009368ecca6efb23dd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaab590c1dd6b06009368ecca6efb23dd0">&#9670;&#160;</a></span>adc_get_cellmv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t adc_get_cellmv </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the cell voltage in millivolts. </p>
<dl class="section return"><dt>Returns</dt><dd>the cell voltage as unsigned 16-bit, in units of millivolts </dd></dl>

</div>
</div>
<a id="ga82fc4ab21cb10f122ae9e44bc2a50d11" name="ga82fc4ab21cb10f122ae9e44bc2a50d11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82fc4ab21cb10f122ae9e44bc2a50d11">&#9670;&#160;</a></span>adc_get_tempC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t adc_get_tempC </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="#ga3f359f6c13ede9800bb3ff0de2dc3213">adc_channel</a></td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the onboard temperature in C. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>the ADC channel for temperature reading</td></tr>
  </table>
  </dd>
</dl>
<p>The parameter <em>ch</em> should be a temperature channel. Otherwise the return value will be meaningless.</p>
<dl class="section return"><dt>Returns</dt><dd>the onboard thermistor temperature in C, 16-bit signed. </dd></dl>

</div>
</div>
<a id="ga011931ae01892897bd9c6a20a4ba83b1" name="ga011931ae01892897bd9c6a20a4ba83b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga011931ae01892897bd9c6a20a4ba83b1">&#9670;&#160;</a></span>adc_get_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t * adc_get_raw </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the raw ADC data in an array. </p>
<p>The number of samples is defined by <code>ADC_NUM_CHANNELS</code> and is currently, at least the following:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Index   </th><th class="markdownTableHeadNone">Sample    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Cell voltage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Board thermistor    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">External sensor   </td></tr>
</table>
<p><a class="el" href="#gacff17a7d94066b5fe8bccba26d9ab207">adc_sample()</a> must have been called at least once prior to calling this function or the resulting values will be undefined.</p>
<dl class="section return"><dt>Returns</dt><dd>pointer to an array containing the raw ADC sample data. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="footer">
					Generated on Wed Jan 22 2025 15:43:06 for BMSNode by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"
                     onerror="this.onerror=null;this.src='doxygen.svg';"/></a> 1.11.0.
					Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
