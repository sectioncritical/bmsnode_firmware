<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.11.0"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>BMSNode: Timer</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">BMSNode
							</div>
							<div id="projectbrief">BMS Node Cell Monitoring Firmware</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__tmr.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Timer</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structtmr" id="r_structtmr"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#structtmr">tmr</a></td></tr>
<tr class="memdesc:structtmr"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduled timer structure.  <a href="#structtmr">More...</a><br /></td></tr>
<tr class="separator:structtmr"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab1c0b33865cecb5eb30e493aec037a62" id="r_gab1c0b33865cecb5eb30e493aec037a62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab1c0b33865cecb5eb30e493aec037a62">tmr_init</a> (void)</td></tr>
<tr class="memdesc:gab1c0b33865cecb5eb30e493aec037a62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize timer module.  <br /></td></tr>
<tr class="separator:gab1c0b33865cecb5eb30e493aec037a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c5bd550d76fc91a677ea4f1e3969321" id="r_ga6c5bd550d76fc91a677ea4f1e3969321"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6c5bd550d76fc91a677ea4f1e3969321">tmr_set</a> (uint16_t duration)</td></tr>
<tr class="memdesc:ga6c5bd550d76fc91a677ea4f1e3969321"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a timer timeout.  <br /></td></tr>
<tr class="separator:ga6c5bd550d76fc91a677ea4f1e3969321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfcce00e8a3bb21622d8dc64631800d9" id="r_gacfcce00e8a3bb21622d8dc64631800d9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacfcce00e8a3bb21622d8dc64631800d9">tmr_expired</a> (uint16_t tmrset)</td></tr>
<tr class="memdesc:gacfcce00e8a3bb21622d8dc64631800d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a previously set timer has expired.  <br /></td></tr>
<tr class="separator:gacfcce00e8a3bb21622d8dc64631800d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7936978cd67fb9559077b2627e486ff8" id="r_ga7936978cd67fb9559077b2627e486ff8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7936978cd67fb9559077b2627e486ff8">tmr_schedule</a> (struct <a class="el" href="#structtmr">tmr</a> *p_tmr, uint8_t id, uint16_t duration, bool periodic)</td></tr>
<tr class="memdesc:ga7936978cd67fb9559077b2627e486ff8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a timer for processing.  <br /></td></tr>
<tr class="separator:ga7936978cd67fb9559077b2627e486ff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc88c8fb61bd6ef6d89eb0691c66261c" id="r_gacc88c8fb61bd6ef6d89eb0691c66261c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacc88c8fb61bd6ef6d89eb0691c66261c">tmr_unschedule</a> (struct <a class="el" href="#structtmr">tmr</a> *p_tmr)</td></tr>
<tr class="memdesc:gacc88c8fb61bd6ef6d89eb0691c66261c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop and remove a previously scheduled timer.  <br /></td></tr>
<tr class="separator:gacc88c8fb61bd6ef6d89eb0691c66261c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac961a58b04ff5187b88fcc4fe86c92fe" id="r_gac961a58b04ff5187b88fcc4fe86c92fe"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="#structtmr">tmr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac961a58b04ff5187b88fcc4fe86c92fe">tmr_process</a> (void)</td></tr>
<tr class="memdesc:gac961a58b04ff5187b88fcc4fe86c92fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the scheduled timers list.  <br /></td></tr>
<tr class="separator:gac961a58b04ff5187b88fcc4fe86c92fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structtmr" id="structtmr"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structtmr">&#9670;&#160;</a></span>tmr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tmr</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Scheduled timer structure. </p>
<p>Structure fields are maintained by <code>tmr_</code> functions. See <a class="el" href="#ga7936978cd67fb9559077b2627e486ff8" title="Schedule a timer for processing.">tmr_schedule()</a> and <a class="el" href="#gac961a58b04ff5187b88fcc4fe86c92fe" title="Process the scheduled timers list.">tmr_process()</a>. </p>
</div>
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab1c0b33865cecb5eb30e493aec037a62" name="gab1c0b33865cecb5eb30e493aec037a62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1c0b33865cecb5eb30e493aec037a62">&#9670;&#160;</a></span>tmr_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tmr_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize timer module. </p>
<p>Should be called once at program start. </p>

</div>
</div>
<a id="ga6c5bd550d76fc91a677ea4f1e3969321" name="ga6c5bd550d76fc91a677ea4f1e3969321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6c5bd550d76fc91a677ea4f1e3969321">&#9670;&#160;</a></span>tmr_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t tmr_set </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>duration</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a timer timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duration</td><td>of the timer in milliseconds, no greater than 32767 ms</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value representing a future timeout value </dd></dl>

</div>
</div>
<a id="gacfcce00e8a3bb21622d8dc64631800d9" name="gacfcce00e8a3bb21622d8dc64631800d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfcce00e8a3bb21622d8dc64631800d9">&#9670;&#160;</a></span>tmr_expired()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tmr_expired </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>tmrset</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a previously set timer has expired. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmrset</td><td>is the value returned from <a class="el" href="#ga6c5bd550d76fc91a677ea4f1e3969321" title="Set a timer timeout.">tmr_set()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the time duration has expired, false otherwise </dd></dl>

</div>
</div>
<a id="ga7936978cd67fb9559077b2627e486ff8" name="ga7936978cd67fb9559077b2627e486ff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7936978cd67fb9559077b2627e486ff8">&#9670;&#160;</a></span>tmr_schedule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tmr_schedule </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="#structtmr">tmr</a> *</td>          <td class="paramname"><span class="paramname"><em>p_tmr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>duration</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>periodic</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Schedule a timer for processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_tmr</td><td>a caller allocated <code>struct tmr</code>, unpopulated </td></tr>
    <tr><td class="paramname">id</td><td>is a unique ID value for the timer, used by clients </td></tr>
    <tr><td class="paramname">duration</td><td>is the timeout of the timer in milliseconds, no greater than 32767 </td></tr>
    <tr><td class="paramname">periodic</td><td>indicates if the timer should be periodic or not</td></tr>
  </table>
  </dd>
</dl>
<p>This function initialized the tmr structure and adds the timer to the scheduled list of timers to process. The list is process by the <a class="el" href="#gac961a58b04ff5187b88fcc4fe86c92fe" title="Process the scheduled timers list.">tmr_process()</a> function. </p>

</div>
</div>
<a id="gacc88c8fb61bd6ef6d89eb0691c66261c" name="gacc88c8fb61bd6ef6d89eb0691c66261c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc88c8fb61bd6ef6d89eb0691c66261c">&#9670;&#160;</a></span>tmr_unschedule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tmr_unschedule </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="#structtmr">tmr</a> *</td>          <td class="paramname"><span class="paramname"><em>p_tmr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stop and remove a previously scheduled timer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_tmr</td><td>is the timer to remove</td></tr>
  </table>
  </dd>
</dl>
<p>The specified timer will be removed from the scheduled timer list. </p>

</div>
</div>
<a id="gac961a58b04ff5187b88fcc4fe86c92fe" name="gac961a58b04ff5187b88fcc4fe86c92fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac961a58b04ff5187b88fcc4fe86c92fe">&#9670;&#160;</a></span>tmr_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="#structtmr">tmr</a> * tmr_process </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process the scheduled timers list. </p>
<p>Iterates through the list of all scheduled timers to check for timeouts. It returns the first expired timer that is found. If no expired timers are found then NULL is returned.</p>
<p>If the expired timer was marked as periodic, then its timeout is refreshed and it remains in the scheduled list. If the expired timer was not marked as periodic, then it is removed from the list.</p>
<dl class="section return"><dt>Returns</dt><dd>the first expired timer that is found, or NULL. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="footer">
					Generated on Wed Jan 22 2025 15:43:06 for BMSNode by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"
                     onerror="this.onerror=null;this.src='doxygen.svg';"/></a> 1.11.0.
					Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
