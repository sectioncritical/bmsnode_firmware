<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.11.0"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>BMSNode: Config</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">BMSNode
							</div>
							<div id="projectbrief">BMS Node Cell Monitoring Firmware</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__cfg.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Config</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structconfig__t" id="r_structconfig__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#structconfig__t">config_t</a></td></tr>
<tr class="memdesc:structconfig__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to hold the BMS Node configuration data.  <a href="#structconfig__t">More...</a><br /></td></tr>
<tr class="separator:structconfig__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga269707f3e311415c661514209cff31e8" id="r_ga269707f3e311415c661514209cff31e8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga269707f3e311415c661514209cff31e8">board_type_t</a> { <br />
&#160;&#160;<a class="el" href="#gga269707f3e311415c661514209cff31e8aa012808397d9cf8da6a3e332e9e5497c">BOARD_TYPE_NONE</a>
, <a class="el" href="#gga269707f3e311415c661514209cff31e8ac1973aad4a6fe63e060e31d067e70cfe">BOARD_TYPE_OSHPARKV4</a>
, <a class="el" href="#gga269707f3e311415c661514209cff31e8a2b17a7d7291f14778711e1d2d20784bf">BOARD_TYPE_STUARTV42</a>
, <a class="el" href="#gga269707f3e311415c661514209cff31e8a8cfe11513a0f75891420e2fd125638d3">BOARD_TYPE_BMSNODE</a>
, <br />
&#160;&#160;<a class="el" href="#gga269707f3e311415c661514209cff31e8a7884f2fd9d238e0ffb7428875dbf0eb7">BOARD_TYPE_BMSNODE_JLC</a>
<br />
 }</td></tr>
<tr class="memdesc:ga269707f3e311415c661514209cff31e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board types.  <a href="#ga269707f3e311415c661514209cff31e8">More...</a><br /></td></tr>
<tr class="separator:ga269707f3e311415c661514209cff31e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab512cca6e784b80b7474c760fa75fba2" id="r_gab512cca6e784b80b7474c760fa75fba2"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab512cca6e784b80b7474c760fa75fba2">cfg_uid</a> (void)</td></tr>
<tr class="memdesc:gab512cca6e784b80b7474c760fa75fba2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the board unique ID.  <br /></td></tr>
<tr class="separator:gab512cca6e784b80b7474c760fa75fba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82f7c884dcfed5ea5823febabf6feaf0" id="r_ga82f7c884dcfed5ea5823febabf6feaf0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga82f7c884dcfed5ea5823febabf6feaf0">cfg_board_type</a> (void)</td></tr>
<tr class="memdesc:ga82f7c884dcfed5ea5823febabf6feaf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the board type.  <br /></td></tr>
<tr class="separator:ga82f7c884dcfed5ea5823febabf6feaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4538462871720943668ae5993ed8a0cf" id="r_ga4538462871720943668ae5993ed8a0cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4538462871720943668ae5993ed8a0cf">cfg_load</a> (void)</td></tr>
<tr class="memdesc:ga4538462871720943668ae5993ed8a0cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the node configuration from persistent memory.  <br /></td></tr>
<tr class="separator:ga4538462871720943668ae5993ed8a0cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga597fd312a4c4be940c802cd5a016e8d3" id="r_ga597fd312a4c4be940c802cd5a016e8d3"><td class="memItemLeft" align="right" valign="top"><a id="ga597fd312a4c4be940c802cd5a016e8d3" name="ga597fd312a4c4be940c802cd5a016e8d3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>cfg_store</b> (void)</td></tr>
<tr class="memdesc:ga597fd312a4c4be940c802cd5a016e8d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the global configuration to persistent memory. <br /></td></tr>
<tr class="separator:ga597fd312a4c4be940c802cd5a016e8d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc1baa567168f1710e3f307b13513170" id="r_gacc1baa567168f1710e3f307b13513170"><td class="memItemLeft" align="right" valign="top"><a id="gacc1baa567168f1710e3f307b13513170" name="gacc1baa567168f1710e3f307b13513170"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>cfg_reset</b> ()</td></tr>
<tr class="memdesc:gacc1baa567168f1710e3f307b13513170"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the configuration to defaults. <br /></td></tr>
<tr class="separator:gacc1baa567168f1710e3f307b13513170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab727d9d5131a335e116cb18aa0431b50" id="r_gab727d9d5131a335e116cb18aa0431b50"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab727d9d5131a335e116cb18aa0431b50">cfg_set</a> (uint8_t len, uint8_t *p_value)</td></tr>
<tr class="memdesc:gab727d9d5131a335e116cb18aa0431b50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a parameter value from a payload buffer.  <br /></td></tr>
<tr class="separator:gab727d9d5131a335e116cb18aa0431b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8cb3b11fb03ea7167ccd8fe56bf6d80" id="r_gad8cb3b11fb03ea7167ccd8fe56bf6d80"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad8cb3b11fb03ea7167ccd8fe56bf6d80">cfg_get</a> (uint8_t len, uint8_t *p_buf)</td></tr>
<tr class="memdesc:gad8cb3b11fb03ea7167ccd8fe56bf6d80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a parameter value from the global configuration, into a payload buffer.  <br /></td></tr>
<tr class="separator:gad8cb3b11fb03ea7167ccd8fe56bf6d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga553e4bd63a91e95203674550adebf35c" id="r_ga553e4bd63a91e95203674550adebf35c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#structconfig__t">config_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga553e4bd63a91e95203674550adebf35c">g_cfg_parms</a></td></tr>
<tr class="memdesc:ga553e4bd63a91e95203674550adebf35c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global system configuration.  <br /></td></tr>
<tr class="separator:ga553e4bd63a91e95203674550adebf35c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf0c43194b9c3fbe41cd3af98900b9e0" id="r_gaaf0c43194b9c3fbe41cd3af98900b9e0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaaf0c43194b9c3fbe41cd3af98900b9e0">g_board_type</a></td></tr>
<tr class="memdesc:gaaf0c43194b9c3fbe41cd3af98900b9e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board type.  <br /></td></tr>
<tr class="separator:gaaf0c43194b9c3fbe41cd3af98900b9e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structconfig__t" id="structconfig__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structconfig__t">&#9670;&#160;</a></span>config_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct config_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Structure to hold the BMS Node configuration data. </p>
<dl class="section note"><dt>Note</dt><dd>The fields marked _(private)_ are maintained by the "cfg" module and should not be used by the client. </dd></dl>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a5723e60ffd628510c699eddbce90be23" name="a5723e60ffd628510c699eddbce90be23"></a>uint8_t</td>
<td class="fieldname">
len</td>
<td class="fielddoc">
(private) total length of config structure </td></tr>
<tr><td class="fieldtype">
<a id="a1d127017fb298b889f4ba24752d08b8e" name="a1d127017fb298b889f4ba24752d08b8e"></a>uint8_t</td>
<td class="fieldname">
type</td>
<td class="fielddoc">
(private) structure type/version ID </td></tr>
<tr><td class="fieldtype">
<a id="af5105c72a61e60d3b44670de20e0c3fb" name="af5105c72a61e60d3b44670de20e0c3fb"></a>uint8_t</td>
<td class="fieldname">
addr</td>
<td class="fielddoc">
the BMSNode bus address </td></tr>
<tr><td class="fieldtype">
<a id="a65474ba34e4f128720da5971b08e117b" name="a65474ba34e4f128720da5971b08e117b"></a>uint16_t</td>
<td class="fieldname">
vscale</td>
<td class="fielddoc">
voltage calibration scaler </td></tr>
<tr><td class="fieldtype">
<a id="a3d313db2fa3712c2c743866e9e7c5d6c" name="a3d313db2fa3712c2c743866e9e7c5d6c"></a>int16_t</td>
<td class="fieldname">
voffset</td>
<td class="fielddoc">
voltage calibration offset </td></tr>
<tr><td class="fieldtype">
<a id="a2544a0ac9db523cd71fd63e26f2a8362" name="a2544a0ac9db523cd71fd63e26f2a8362"></a>uint16_t</td>
<td class="fieldname">
tscale</td>
<td class="fielddoc">
temperature calibration scaler (TBD) </td></tr>
<tr><td class="fieldtype">
<a id="a559bf9bb1eee3cc0536ddc1346049cb2" name="a559bf9bb1eee3cc0536ddc1346049cb2"></a>int16_t</td>
<td class="fieldname">
toffset</td>
<td class="fielddoc">
temperature calibration offset (TBD) </td></tr>
<tr><td class="fieldtype">
<a id="a9c9c33a17b134afb5372b9d4984d6f41" name="a9c9c33a17b134afb5372b9d4984d6f41"></a>uint16_t</td>
<td class="fieldname">
xscale</td>
<td class="fielddoc">
external sensor calibration scaler (TBD) </td></tr>
<tr><td class="fieldtype">
<a id="aeb77746bf2810f09435801c4d42d84fc" name="aeb77746bf2810f09435801c4d42d84fc"></a>int16_t</td>
<td class="fieldname">
xoffset</td>
<td class="fielddoc">
external sensor calibration offset (TBD) </td></tr>
<tr><td class="fieldtype">
<a id="a59a5047817b6f94b2a61b6706ba86767" name="a59a5047817b6f94b2a61b6706ba86767"></a>uint16_t</td>
<td class="fieldname">
shuntmax</td>
<td class="fielddoc">
shunt upper voltage, in millivolts </td></tr>
<tr><td class="fieldtype">
<a id="af83ae6e3b132fffd387a21a4d9ef377e" name="af83ae6e3b132fffd387a21a4d9ef377e"></a>uint16_t</td>
<td class="fieldname">
shuntmin</td>
<td class="fielddoc">
shunt lower voltage threshold, in millivolts </td></tr>
<tr><td class="fieldtype">
<a id="a66a8174e27004b0e3ec58d293285e46d" name="a66a8174e27004b0e3ec58d293285e46d"></a>uint16_t</td>
<td class="fieldname">
shunttime</td>
<td class="fielddoc">
shunt inactivity timeout in seconds </td></tr>
<tr><td class="fieldtype">
<a id="ac4fd1ef9f6a33e099552dafb0e9638d3" name="ac4fd1ef9f6a33e099552dafb0e9638d3"></a>int8_t</td>
<td class="fieldname">
temphi</td>
<td class="fielddoc">
temperature regulation upper limit in C </td></tr>
<tr><td class="fieldtype">
<a id="a477edab75ddb1727a7e4e0948dd59608" name="a477edab75ddb1727a7e4e0948dd59608"></a>int8_t</td>
<td class="fieldname">
templo</td>
<td class="fielddoc">
temperature regulation lower limit in C (should be &lt; temphi) </td></tr>
<tr><td class="fieldtype">
<a id="a53965dfe2e260f37dbe9dea8d48559b1" name="a53965dfe2e260f37dbe9dea8d48559b1"></a>uint16_t</td>
<td class="fieldname">
tempadj</td>
<td class="fielddoc">
TBD temperature regulation algorithm factor. </td></tr>
<tr><td class="fieldtype">
<a id="ab737b9992427f6e30af5b3846d48b66d" name="ab737b9992427f6e30af5b3846d48b66d"></a>uint8_t</td>
<td class="fieldname">
crc</td>
<td class="fielddoc">
(private) structure CRC for non-volatile storage </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga269707f3e311415c661514209cff31e8" name="ga269707f3e311415c661514209cff31e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga269707f3e311415c661514209cff31e8">&#9670;&#160;</a></span>board_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga269707f3e311415c661514209cff31e8">board_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Board types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga269707f3e311415c661514209cff31e8aa012808397d9cf8da6a3e332e9e5497c" name="gga269707f3e311415c661514209cff31e8aa012808397d9cf8da6a3e332e9e5497c"></a>BOARD_TYPE_NONE&#160;</td><td class="fielddoc"><p>undefined b oard type </p>
</td></tr>
<tr><td class="fieldname"><a id="gga269707f3e311415c661514209cff31e8ac1973aad4a6fe63e060e31d067e70cfe" name="gga269707f3e311415c661514209cff31e8ac1973aad4a6fe63e060e31d067e70cfe"></a>BOARD_TYPE_OSHPARKV4&#160;</td><td class="fielddoc"><p>original OSHPark prototypes of diyBMS </p>
</td></tr>
<tr><td class="fieldname"><a id="gga269707f3e311415c661514209cff31e8a2b17a7d7291f14778711e1d2d20784bf" name="gga269707f3e311415c661514209cff31e8a2b17a7d7291f14778711e1d2d20784bf"></a>BOARD_TYPE_STUARTV42&#160;</td><td class="fielddoc"><p>lot of v4.2 boards from Stuart </p>
</td></tr>
<tr><td class="fieldname"><a id="gga269707f3e311415c661514209cff31e8a8cfe11513a0f75891420e2fd125638d3" name="gga269707f3e311415c661514209cff31e8a8cfe11513a0f75891420e2fd125638d3"></a>BOARD_TYPE_BMSNODE&#160;</td><td class="fielddoc"><p>BMSNode 1.x (new design) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga269707f3e311415c661514209cff31e8a7884f2fd9d238e0ffb7428875dbf0eb7" name="gga269707f3e311415c661514209cff31e8a7884f2fd9d238e0ffb7428875dbf0eb7"></a>BOARD_TYPE_BMSNODE_JLC&#160;</td><td class="fielddoc"><p>BMSNode 1.x (from JLCPCB) </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab512cca6e784b80b7474c760fa75fba2" name="gab512cca6e784b80b7474c760fa75fba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab512cca6e784b80b7474c760fa75fba2">&#9670;&#160;</a></span>cfg_uid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t cfg_uid </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the board unique ID. </p>
<p>This value is set during board production.</p>
<dl class="section return"><dt>Returns</dt><dd>the board unique ID as a 32-bit integer </dd></dl>

</div>
</div>
<a id="ga82f7c884dcfed5ea5823febabf6feaf0" name="ga82f7c884dcfed5ea5823febabf6feaf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82f7c884dcfed5ea5823febabf6feaf0">&#9670;&#160;</a></span>cfg_board_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t cfg_board_type </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the board type. </p>
<p>This value is set during board production.</p>
<dl class="section return"><dt>Returns</dt><dd>the board type as 8-bit integer. </dd></dl>

</div>
</div>
<a id="ga4538462871720943668ae5993ed8a0cf" name="ga4538462871720943668ae5993ed8a0cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4538462871720943668ae5993ed8a0cf">&#9670;&#160;</a></span>cfg_load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool cfg_load </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the node configuration from persistent memory. </p>
<p>The configuration will be read from persistent memory and stored into the global configuration <a class="el" href="#ga553e4bd63a91e95203674550adebf35c">g_cfg_parms</a>. If the stored configuration is not present or not valid, then the global configuration will be populated with default values.</p>
<p>After calling this function, the configuration parameters can be accessed directly using <a class="el" href="#ga553e4bd63a91e95203674550adebf35c">g_cfg_parms</a>.</p>
<dl class="section note"><dt>Note</dt><dd>this function should be called at least once during system init.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if a configuration was loaded from persistent memory, or <code>false</code> if defaults were loaded. </dd></dl>

</div>
</div>
<a id="gab727d9d5131a335e116cb18aa0431b50" name="gab727d9d5131a335e116cb18aa0431b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab727d9d5131a335e116cb18aa0431b50">&#9670;&#160;</a></span>cfg_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool cfg_set </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>p_value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a parameter value from a payload buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">len</td><td>the payload length of p_value (includes id byte) </td></tr>
    <tr><td class="paramname">p_value</td><td>payload buffer that holds parameter ID and value bytes</td></tr>
  </table>
  </dd>
</dl>
<p>This function takes a parameter ID and value from a payload buffer and stores it into the global configuration. The buffer format is the same as the payload of a SETPARM command. This allows the command processor to pass the payload directly.</p>
<p>The first byte holds the parameter ID and the remaining bytes hold the value, which depends on which parameter it is.</p>
<dl class="section note"><dt>Note</dt><dd>the permanent configuration is not updated. The client must call <a class="el" href="#ga597fd312a4c4be940c802cd5a016e8d3" title="Stores the global configuration to persistent memory.">cfg_store()</a> in order to commit any changes.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the parameter was updated, <code>false</code> if there is an error such as invalid parameter ID. </dd></dl>

</div>
</div>
<a id="gad8cb3b11fb03ea7167ccd8fe56bf6d80" name="gad8cb3b11fb03ea7167ccd8fe56bf6d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad8cb3b11fb03ea7167ccd8fe56bf6d80">&#9670;&#160;</a></span>cfg_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t cfg_get </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>p_buf</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a parameter value from the global configuration, into a payload buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">len</td><td>the maximum length of the passed payload buffer p_buf </td></tr>
    <tr><td class="paramname">p_buf</td><td>a payload buffer to use for storing the parameter value</td></tr>
  </table>
  </dd>
</dl>
<p>This function will get the value of a configuration parameter and store it into the caller-supplied payload buffer. The buffer format is the same as the payload of a GETPARM command. This allows the command processor to use the result directly as a payload for a reply packet.</p>
<p>The first byte of the buffer should be pre-populated with the parameter ID by the caller.</p>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes in the buffer, including the parameter ID and parameter value bytes. This is the same value to be used as the payload length. If there is any problem with input parameters, the zero (0) will be returned. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga553e4bd63a91e95203674550adebf35c" name="ga553e4bd63a91e95203674550adebf35c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga553e4bd63a91e95203674550adebf35c">&#9670;&#160;</a></span>g_cfg_parms</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#structconfig__t">config_t</a> g_cfg_parms</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global system configuration. </p>
<p>This is where the configuration parameters are stored. This is populated by calling <a class="el" href="#ga4538462871720943668ae5993ed8a0cf" title="Load the node configuration from persistent memory.">cfg_load()</a> and other modules can access structure members directly. <a class="el" href="#ga597fd312a4c4be940c802cd5a016e8d3" title="Stores the global configuration to persistent memory.">cfg_store()</a> will cause the values in this structure to be stored to permanent memory. However, the proper way to modify the structure is to use <a class="el" href="#gab727d9d5131a335e116cb18aa0431b50" title="Set a parameter value from a payload buffer.">cfg_set()</a> followed by <a class="el" href="#ga597fd312a4c4be940c802cd5a016e8d3" title="Stores the global configuration to persistent memory.">cfg_store()</a> to commit the changes. </p>

</div>
</div>
<a id="gaaf0c43194b9c3fbe41cd3af98900b9e0" name="gaaf0c43194b9c3fbe41cd3af98900b9e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf0c43194b9c3fbe41cd3af98900b9e0">&#9670;&#160;</a></span>g_board_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t g_board_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Board type. </p>
<p>This is used for conditional execution where the type of board hardware makes a difference in which code path to take. This is updated by <a class="el" href="#ga4538462871720943668ae5993ed8a0cf" title="Load the node configuration from persistent memory.">cfg_load()</a>. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="footer">
					Generated on Wed Jan 22 2025 15:43:06 for BMSNode by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"
                     onerror="this.onerror=null;this.src='doxygen.svg';"/></a> 1.11.0.
					Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
